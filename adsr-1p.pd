#N canvas 0 64 1366 676 12;
#X obj 105 111 inlet;
#X obj 435 112 inlet;
#X text 101 86 trigger;
#X obj 105 139 sel 0;
#X obj 244 155 t b;
#X obj 166 264 f \$1;
#X obj 166 289 pack 0 \$2;
#X obj 492 112 inlet;
#X obj 438 281 del \$2;
#X obj 458 429 line~;
#X obj 462 304 f \$4;
#X obj 501 379 pack 0 \$3;
#X obj 554 112 inlet;
#X obj 616 112 inlet;
#X obj 689 111 inlet;
#X msg 105 170 stop;
#X obj 612 306 pack 0 \$5;
#X text 435 90 level;
#X obj 501 355 * \$1;
#X obj 458 454 outlet~;
#X text 102 378 and pack with;
#X text 103 398 attack time;
#X text 31 126 if zero;
#X text 32 143 release;
#X text 12 160 and cancel;
#X text 43 177 decay;
#X text 284 272 on attack \, set a;
#X text 278 305 recall sustain value;
#X text 315 378 pack with decay time;
#X text 605 332 on release ramp;
#X text 606 349 back to zero;
#X obj 462 329 * 0.01;
#X text 526 596 Objects such as "f" and "pack" can be given dollar
sign arguments to initialize their contents from adsr's creation arguments.
Inlets are supplied to change them on the fly.;
#X text 13 2 ADSR ENVELOPE;
#X text 488 90 attack;
#X text 555 89 decay;
#X text 609 90 sustain;
#X text 686 90 release;
#X text 202 71 attack;
#X obj 204 92 moses;
#X obj 194 122 t b b;
#X msg 128 290 0;
#X text 20 273 optionally;
#X text 10 291 bash to zero;
#X text 25 246 ATTACK:;
#X text 525 501 When you send this patch a positive trigger it schedules
a line~ to do an attack and decay \, and if zero \, it starts the release
ramp.;
#X text 747 468 Updated for Pd version 0.37;
#X text 255 89 test for negative trigger;
#X text 253 113 if so \, zero;
#X text 254 129 the output;
#X text 278 165 in any case;
#X text 303 355 multiply by peak level;
#X text 280 286 delay for sustain;
#X text 276 328 convert from percent;
#X text 155 340 ... then;
#X text 103 359 recall peak level;
#X text 439 74 peak;
#X text 281 149 ... do this;
#X text 523 553 Negative triggers cause the output to jump to zero
and then attack (instead of attacking from the current location).;
#X text 208 1 Arguments: level \, attack time \, decay time \, sustain
level \, release time. A \, D \, and R are in msec and S is in percent.
This patch is used as an abstraction in various examples.;
#X obj 825 -1 loadbang;
#X obj 897 42 f \$6;
#X floatatom 897 67 5 0 0 0 - - -;
#X floatatom 947 328 5 0 0 2 s - -;
#X floatatom 789 332 5 0 0 2 a - -;
#X floatatom 860 332 5 0 0 2 d - -;
#X floatatom 1018 327 5 0 0 2 r - -;
#X floatatom 200 535 5 0 0 2 s - -;
#X floatatom 109 535 5 0 0 2 a - -;
#X floatatom 155 535 5 0 0 2 d - -;
#X floatatom 248 535 5 0 0 2 r - -;
#X floatatom 877 213 5 0 0 0 - - -;
#X floatatom 918 211 5 0 0 0 - - -;
#X floatatom 958 212 5 0 0 0 - - -;
#X floatatom 1004 213 5 0 0 0 - - -;
#X obj 877 187 f \$2;
#X obj 919 187 f \$3;
#X obj 958 186 f \$4;
#X obj 1001 187 f \$5;
#X obj 1208 96 inlet;
#X text 1203 74 the 12 1p values;
#X obj 1073 99 inlet;
#X text 1063 76 1p value;
#N canvas 0 64 1366 676 1p 0;
#X obj 34 40 inlet;
#X floatatom 34 334 5 0 0 0 idx - -;
#X obj 795 282 mod 3, f 6;
#X obj 34 235 t f f f f f;
#X obj 135 312 int;
#X obj 135 280 / 27;
#X obj 352 280 / 9;
#X obj 355 303 mod 3;
#X obj 355 331 int;
#X obj 577 300 mod 3;
#X obj 577 328 int;
#X obj 574 277 / 3;
#X obj 34 139 expr ($f1/127)*81;
#X obj 34 168 int;
#X obj 34 200 change;
#X obj 135 348 sel 0 1 2;
#X obj 355 356 sel 0 1 2;
#X obj 578 355 sel 0 1 2;
#X obj 155 23 inlet;
#X obj 155 48 unpack f f f f f f f f f f f f;
#X obj 795 350 sel 0 1 2;
#X msg 152 453 set \$1;
#X floatatom 134 486 5 0 0 0 - - -;
#X msg 208 453 set \$1;
#X floatatom 190 486 5 0 0 0 - - -;
#X msg 268 453 set \$1;
#X floatatom 250 486 5 0 0 0 - - -;
#X msg 382 461 set \$1;
#X floatatom 359 494 5 0 0 0 - - -;
#X msg 438 461 set \$1;
#X floatatom 415 494 5 0 0 0 - - -;
#X msg 498 461 set \$1;
#X floatatom 475 494 5 0 0 0 - - -;
#X msg 601 460 set \$1;
#X floatatom 578 493 5 0 0 0 - - -;
#X msg 657 460 set \$1;
#X floatatom 634 493 5 0 0 0 - - -;
#X msg 717 460 set \$1;
#X floatatom 694 493 5 0 0 0 - - -;
#X msg 822 455 set \$1;
#X floatatom 796 488 5 0 0 0 - - -;
#X msg 878 455 set \$1;
#X floatatom 852 488 5 0 0 0 - - -;
#X msg 938 455 set \$1;
#X floatatom 911 488 5 0 0 0 - - -;
#X obj 33 534 outlet;
#X obj 134 533 outlet;
#X obj 359 533 outlet;
#X obj 579 533 outlet;
#X obj 798 533 outlet;
#X connect 0 0 12 0;
#X connect 1 0 45 0;
#X connect 2 0 20 0;
#X connect 3 0 1 0;
#X connect 3 1 5 0;
#X connect 3 2 6 0;
#X connect 3 3 11 0;
#X connect 3 4 2 0;
#X connect 4 0 15 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 16 0;
#X connect 9 0 10 0;
#X connect 10 0 17 0;
#X connect 11 0 9 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 3 0;
#X connect 15 0 22 0;
#X connect 15 1 24 0;
#X connect 15 2 26 0;
#X connect 16 0 28 0;
#X connect 16 1 30 0;
#X connect 16 2 32 0;
#X connect 17 0 34 0;
#X connect 17 1 36 0;
#X connect 17 2 38 0;
#X connect 18 0 19 0;
#X connect 19 0 21 0;
#X connect 19 1 23 0;
#X connect 19 2 25 0;
#X connect 19 3 27 0;
#X connect 19 4 29 0;
#X connect 19 5 31 0;
#X connect 19 6 33 0;
#X connect 19 7 35 0;
#X connect 19 8 37 0;
#X connect 19 9 39 0;
#X connect 19 10 41 0;
#X connect 19 11 43 0;
#X connect 20 0 40 0;
#X connect 20 1 42 0;
#X connect 20 2 44 0;
#X connect 21 0 22 0;
#X connect 22 0 46 0;
#X connect 23 0 24 0;
#X connect 24 0 46 0;
#X connect 25 0 26 0;
#X connect 26 0 46 0;
#X connect 27 0 28 0;
#X connect 28 0 47 0;
#X connect 29 0 30 0;
#X connect 30 0 47 0;
#X connect 31 0 32 0;
#X connect 32 0 47 0;
#X connect 33 0 34 0;
#X connect 34 0 48 0;
#X connect 35 0 36 0;
#X connect 36 0 48 0;
#X connect 37 0 38 0;
#X connect 38 0 48 0;
#X connect 39 0 40 0;
#X connect 40 0 49 0;
#X connect 41 0 42 0;
#X connect 42 0 49 0;
#X connect 43 0 44 0;
#X connect 44 0 49 0;
#X restore 1073 125 pd 1p;
#X f 20;
#X obj 789 107 r \$0-a;
#X obj 863 104 r \$0-d;
#X obj 947 102 r \$0-s;
#X obj 1018 101 r \$0r;
#X text 938 41 adsr(1p) idx;
#X obj 1105 160 s \$0-a;
#X obj 1160 160 s \$0-d;
#X obj 1214 160 s \$0-s;
#X obj 1270 159 s \$0r;
#X obj 1073 559 outlet;
#X connect 0 0 3 0;
#X connect 1 0 5 1;
#X connect 1 0 18 1;
#X connect 3 0 15 0;
#X connect 3 0 16 0;
#X connect 3 1 39 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 7 0 6 1;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 19 0;
#X connect 10 0 31 0;
#X connect 11 0 9 0;
#X connect 12 0 11 1;
#X connect 13 0 10 1;
#X connect 14 0 16 1;
#X connect 15 0 8 0;
#X connect 16 0 9 0;
#X connect 18 0 11 0;
#X connect 31 0 18 0;
#X connect 39 0 40 0;
#X connect 39 1 4 0;
#X connect 40 0 4 0;
#X connect 40 1 41 0;
#X connect 41 0 9 0;
#X connect 60 0 61 0;
#X connect 60 0 75 0;
#X connect 60 0 76 0;
#X connect 60 0 77 0;
#X connect 60 0 78 0;
#X connect 61 0 62 0;
#X connect 63 0 10 1;
#X connect 63 0 67 0;
#X connect 64 0 8 1;
#X connect 64 0 6 1;
#X connect 64 0 68 0;
#X connect 65 0 11 1;
#X connect 65 0 69 0;
#X connect 66 0 16 1;
#X connect 66 0 70 0;
#X connect 71 0 64 0;
#X connect 72 0 65 0;
#X connect 73 0 63 0;
#X connect 74 0 66 0;
#X connect 75 0 71 0;
#X connect 76 0 72 0;
#X connect 77 0 73 0;
#X connect 78 0 74 0;
#X connect 79 0 83 1;
#X connect 81 0 83 0;
#X connect 83 0 93 0;
#X connect 83 1 89 0;
#X connect 83 2 90 0;
#X connect 83 3 91 0;
#X connect 83 4 92 0;
#X connect 84 0 64 0;
#X connect 85 0 65 0;
#X connect 86 0 63 0;
#X connect 87 0 66 0;
#X coords 0 -1 1 1 200 56 1 100 500;
